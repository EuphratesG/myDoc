# 谈谈浏览器

1. 浏览器是最经常使用到的一种客户端程序。
2. 浏览器是一个软件。具体定义：浏览器是指可以显示网页服务器或者文件系统的HTML文件（标准通用标记语言的一个应用）内容，并让用户与这些文件交互的一种软件。

IPC （Inter Process Communication）进程通信

所谓的“连接”，其实是客户端和服务端保存的一份关于对方的信息，如ip地址、端口号等。  
tcp三握手四挥手在互相的视角都要知道两方都准备好了再完成，主要考虑报文丢失

1. 为什么要三握手，二握手不行吗 关键在连接确定决定权要在客户端
   1. 防止旧的连接先于新的连接初始化造成混乱。会导致服务端白白浪费了建立连接的资源和收到RST之前发送的无效数据。
![](https://cdn.jsdelivr.net/gh/EuphratesG/myPic@master/browser1.png)
   1. 同步双方初始序列号syn 四次握手其实也能够可靠的同步双方的初始化序号，但由于四握手就变成两个半双工连接了，且第二步和第三步可以优化成一步，所以就成了「三次握手」。  
   而两次握手则只能保证一边而两次握手只保证了一方的初始序列号能被对方成功接收，没办法保证双方的初始序列号都能被确认接收。
   2. 防止客户端连接请求超时重传后旧请求延迟到达产生无效连接浪费资源（有点类似1，只不过3是同一个连接请求的重传，1是快速产生新连接）
1. 为什么要四挥手 fin
2. 四挥手结束客户端为什么要等2msl 若第四挥丢失则要等第三挥再来
3. https tcp->ssl(secure socket layer)->https 共享密钥加密和公开密钥加密的混合机制


get和post主要区别就是post可以向服务器提交大数据文件，如上传图片。get只能URL上带点请求参数。post 除了get的功能还能顺便给服务器邮寄（post）包裹。get一般来说是幂等（不对服务端产生副作用），post不幂等，get只用于简单请求url带一点请求参数，post参数一般都在body，但实际可以灵活处理。现状是post几乎完全代替get。

并行和并发要点：串行还是并发，这都是任务安排者视角看到的东西，是为了解决一个问题安排了一些进程串行或并发。前者要求你看到前一个任务结束了，下一个任务才能安排；而后者呢，你可以同时提交许多任务，执行者（们）之间会相互协调并自己安排执行顺序（但未必合理，比如可能出现死锁）。相比之下，“并行”是任务执行者视角的东西，和前两者所处平面不同。另外，同步和异步也是任务执行者（进程）视角的东西。  
换句话说，“并发”的确经常能让“并行”自然而然的出现，硬盘利用率也的确被提高了；只是这种提高缺乏保证（比如，运气不好时，复制进程A可能和进程B争着读取旧硬盘，从而导致很多不必要的寻道动作）；而且，由于并发并不保证合理的执行顺序，反而经常“搬起石头砸自己的脚”，速度不如串行（串行进程处理一个任务一定速度最快，但是资源利用率会很低），因此需要确定进程间的同步关系。 

### 协程
本质上就是用户级线程（工业界一般把进程看做资源分配的单位，线程才是调度单位），而用户级线程本质上是对内核级线程的进一步功能划分，产生目的是减少线程建立、调度、销毁等操作的开销。虽然线程池可以一定程度缓解，但是仍有调度开销。多对一、一对一、多（多）对多（少）。
那就是说，协程A/B/C就是在用户态实现的小型调度器。由用户态的进程/线程代码决定在何时执行协程A/B/C。能理解为协程这个就是用户态状态机吗？比如协程A就是状态a，协程B就是状态b，当协程A发生IO时就切到协程B去执行

所谓回调函数就是中断处理函数，回调属于中断的一种结果。  
进程同步、进程异步  
网络编程 函数的调用方式：同步调用（sync）、异步调用（async）、阻塞调用、非阻塞调用  

1. 同步阻塞（调用者所在线程阻塞且保持轮询）
2. 同步非阻塞（调用者所在线程继续执行且保持轮询）
3. 异步阻塞（这个看起来和同步阻塞很像，但可以这样理解，同步阻塞相当于调用者A调用了一个函数F，F是在调用者A所在的线程中完成的，而异步阻塞相当于调用者A发出对F的调用，然后A所在线程挂起，而实际F是在另一个线程中完成，然后另一个线程通知给A所在的线程，更准确的是将两个线程分别换成用户进程和内核）
4. 异步非阻塞（感觉正常理解意义上的异步）
